@*
@file        Details.cshtml
@description Spor salonu detay ekranıdır.
             Seçilen salonun temel bilgileri (adres, çalışma saatleri, açıklama) gösterilir.
             Ayrıca bu salona bağlı hizmetler ve antrenörler listelenir.
             Admin rolündeki kullanıcılar için Düzenle / Sil butonları aktif edilir.
@course      BSM 311 Web Programlama
@assignment  Dönem Projesi – MutluSporSalonu
@date        20.12.2025
@author      D255012008 - Serkan Mutlu
*@

@model MutluSporSalonu.Models.SporSalonu

@{
    ViewData["Title"] = "Spor Salonu Detay";
}

<div class="container mt-4">

    <div class="d-flex justify-content-between mb-3">
        <h2>@Model.SalonAdi - Detay</h2>
        <a asp-action="Index" class="btn btn-secondary">Geri Dön</a>
    </div>

    <!-- Salonun temel bilgileri -->
    <div class="card shadow-sm mb-4">
        <div class="card-body">

            <h4 class="card-title">@Model.SalonAdi</h4>
            <p class="card-text text-muted">@Model.SalonAdres</p>

            <p>
                <strong>Çalışma Saatleri:</strong><br />
                @Model.SalonAcilisSaati.ToString(@"hh\:mm") -
                @Model.SalonKapanisSaati.ToString(@"hh\:mm")
            </p>

            <p>
                <strong>Açıklama:</strong><br />
                @* Açıklama boşsa kullanıcıya “yok” mesajı gösterilir *@
                @if (string.IsNullOrWhiteSpace(Model.SalonAciklama))
                {
                    <span class="text-muted">Açıklama bulunmuyor.</span>
                }
                else
                {
                    @Model.SalonAciklama
                }
            </p>

            @* Sadece Admin kullanıcılar salonu düzenleyip silebilsin *@
            @if (User.IsInRole("Admin"))
            {
                <div class="mt-3">
                    <a asp-action="Edit" asp-route-id="@Model.SalonID" class="btn btn-warning">Düzenle</a>
                    <a asp-action="Delete" asp-route-id="@Model.SalonID" class="btn btn-danger">Sil</a>
                </div>
            }

        </div>
    </div>

    <!-- Bu salonda sunulan hizmetler -->
    <div class="card shadow-sm mb-4">
        <div class="card-header bg-light">
            <h5 class="m-0">Bu Salonda Sunulan Hizmetler</h5>
        </div>
        <div class="card-body">

            @* Hizmet navigasyonu gelmediyse veya boşsa bilgilendir *@
            @if (Model.Hizmetler == null || !Model.Hizmetler.Any())
            {
                <p class="text-muted">Bu salona ait hizmet tanımlanmamış.</p>
            }
            else
            {
                <ul class="list-group">
                    @foreach (var hizmet in Model.Hizmetler)
                    {
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span>
                                <strong>@hizmet.HizmetAdi</strong>
                                <br />
                                <small class="text-muted">
                                    Süre: @hizmet.HizmetSureDakika dakika | Ücret: @hizmet.HizmetUcret ₺
                                </small>
                            </span>
                        </li>
                    }
                </ul>
            }

        </div>
    </div>

    <!-- Bu salonda çalışan antrenörler -->
    <div class="card shadow-sm">
        <div class="card-header bg-light">
            <h5 class="m-0">Bu Salonda Çalışan Antrenörler</h5>
        </div>
        <div class="card-body">

            @* Antrenör navigasyonu yoksa veya boşsa bilgilendir *@
            @if (Model.Antrenorler == null || !Model.Antrenorler.Any())
            {
                <p class="text-muted">Bu salona ait antrenör bulunmuyor.</p>
            }
            else
            {
                <div class="row">
                    @foreach (var ant in Model.Antrenorler)
                    {
                        <div class="col-md-6 mb-3">
                            <div class="card">
                                <div class="card-body">
                                    <h6>@ant.AntrenorAdSoyad</h6>
                                    <p class="text-muted">@ant.AntrenorUzmanlikAlanlari</p>
                                    <p>
                                        <strong>Müsaitlik:</strong><br />
                                        @ant.AntrenorMusaitlikBaslangic.ToString(@"hh\:mm") -
                                        @ant.AntrenorMusaitlikBitis.ToString(@"hh\:mm")
                                    </p>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            }

        </div>
    </div>

</div>
