@*
@file        Index.cshtml
@description Sistemde kayıtlı antrenörlerin liste halinde görüntülendiği sayfadır.
             Kullanıcının rolüne göre ekran davranışı farklılaşır.
             Admin kullanıcılar için ekleme, düzenleme ve silme işlemleri görünür olur.
             Normal üyeler yalnızca listeleme ve detay görüntüleme yapabilir.

@course      BSM 311 Web Programlama
@assignment  Dönem Projesi – MutluSporSalonu
@date        20.12.2025
@author      D255012008 - Serkan Mutlu
*@

@model IEnumerable<MutluSporSalonu.Models.Antrenor>

@{
    ViewData["Title"] = "Antrenörler";
    bool adminMi = User?.IsInRole("Admin") ?? false;
}

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Antrenörler</h2>

        @if (adminMi)
        {
            <a asp-action="Create" class="btn btn-primary">
                Antrenör Ekle
            </a>
        }
    </div>

    @if (Model == null || !Model.Any())
    {
        <div class="alert alert-info">
            Sistemde kayıtlı antrenör bulunmamaktadır.
            @if (adminMi)
            {
                <a asp-action="Create">Yeni antrenör eklemek için tıklayın.</a>
            }
        </div>
    }
    else
    {
        <table class="table table-striped table-bordered table-hover">
            <thead class="table-light">
                <tr>
                    <th>Ad Soyad</th>
                    <th>Uzmanlık Alanları</th>
                    <th>Spor Salonu</th>
                    <th>Müsaitlik</th>
                    <th style="width: @(adminMi ? "210px" : "90px");">İşlemler</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var ant in Model)
                {
                    <tr>
                        <td>@ant.AntrenorAdSoyad</td>
                        <td>@ant.AntrenorUzmanlikAlanlari</td>
                        <td>@ant.SporSalonu?.SalonAdi</td>
                        <td>
                            @ant.AntrenorMusaitlikBaslangic.ToString(@"hh\:mm")
                            -
                            @ant.AntrenorMusaitlikBitis.ToString(@"hh\:mm")
                        </td>
                        <td>
                            <div class="btn-group" role="group">
                                <a asp-action="Details" asp-route-id="@ant.AntrenorID" class="btn btn-sm btn-info">
                                    Detay
                                </a>

                                @if (adminMi)
                                {
                                    <a asp-action="Edit" asp-route-id="@ant.AntrenorID" class="btn btn-sm btn-warning">
                                        Düzenle
                                    </a>
                                    <a asp-action="Delete" asp-route-id="@ant.AntrenorID" class="btn btn-sm btn-danger">
                                        Sil
                                    </a>
                                }
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
</div>
