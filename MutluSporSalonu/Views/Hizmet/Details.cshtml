@*
@file        Details.cshtml
@description Sistemde tanımlı bir hizmetin detay bilgilerinin görüntülendiği ekrandır.
             Admin kullanıcılar bu ekrandan hizmeti düzenleyebilir veya silebilir.
             Normal kullanıcılar yalnızca hizmet bilgilerini görüntüleyebilir.

@course      BSM 311 Web Programlama
@assignment  Dönem Projesi – MutluSporSalonu
@date        20.12.2025
@author      D255012008 - Serkan Mutlu
*@

@model MutluSporSalonu.Models.Hizmet

@{
    ViewData["Title"] = "Hizmet Detay";
    // Kullanıcının Admin rolünde olup olmadığı kontrol edilir
    bool adminMi = User?.IsInRole("Admin") ?? false;
}

<div class="container mt-4">

    <div class="d-flex justify-content-between mb-3">
        <h2>@Model.HizmetAdi - Detay</h2>
        <a asp-action="Index" class="btn btn-secondary">Geri Dön</a>
    </div>

    <!-- Hizmete ait temel bilgiler -->
    <div class="card shadow-sm mb-4">
        <div class="card-body">

            <h4 class="card-title">@Model.HizmetAdi</h4>

            <p class="card-text">
                <strong>Süre:</strong> @Model.HizmetSureDakika<br />
                <strong>Ücret:</strong> @Model.HizmetUcret ₺<br />
                <strong>Spor Salonu:</strong> @Model.SporSalonu?.SalonAdi
            </p>

            <p>
                <strong>Açıklama:</strong><br />
                @if (string.IsNullOrWhiteSpace(Model.HizmetAciklama))
                {
                    <span class="text-muted">Açıklama bulunmuyor.</span>
                }
                else
                {
                    @Model.HizmetAciklama
                }
            </p>

            <!-- Düzenle / Sil butonları sadece Admin için gösterilir -->
            @if (adminMi)
            {
                <div class="mt-3">
                    <a asp-action="Edit" asp-route-id="@Model.HizmetID" class="btn btn-warning">Düzenle</a>
                    <a asp-action="Delete" asp-route-id="@Model.HizmetID" class="btn btn-danger">Sil</a>
                </div>
            }

        </div>
    </div>

    <!-- Hizmeti verebilen antrenörler listelenir -->
    @if (Model.Antrenorler != null && Model.Antrenorler.Any())
    {
        <div class="card shadow-sm">
            <div class="card-header bg-light">
                <h5 class="m-0">Bu Hizmeti Verebilen Antrenörler</h5>
            </div>
            <div class="card-body">
                <ul class="list-group">
                    @foreach (var ant in Model.Antrenorler)
                    {
                        <li class="list-group-item">
                            <strong>@ant.AntrenorAdSoyad</strong><br />
                            <small class="text-muted">@ant.AntrenorUzmanlikAlanlari</small>
                        </li>
                    }
                </ul>
            </div>
        </div>
    }
</div>
